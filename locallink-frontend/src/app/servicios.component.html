<div class="container">
  <!-- Encabezado -->
  <div class="header">
    <h1>üß™ Cat√°logo de Servicios de Fumigaci√≥n</h1>
  </div>

  <!-- Formulario -->
  <div class="card servicio-form">
    <h3>{{ servicioForm.id ? '‚úèÔ∏è Editar Servicio' : '‚ûï Nuevo Servicio' }}</h3>

    <div class="form-group">
      <label for="nombre">Nombre del servicio</label>
      <input type="text" id="nombre" [(ngModel)]="servicioForm.nombre" class="form-control"
        placeholder="Ej. Fumigaci√≥n Residencial Completa">
    </div>

    <div class="form-group">
      <label for="descripcion">Descripci√≥n detallada</label>
      <textarea id="descripcion" [(ngModel)]="servicioForm.descripcion" class="form-control" rows="4"
        placeholder="Describe el servicio incluyendo cobertura, productos utilizados, garant√≠a, etc."></textarea>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="precio">Precio ($)</label>
        <input type="number" id="precio" [(ngModel)]="servicioForm.precio" class="form-control precio-input"
          placeholder="299.99" step="0.01" min="0">
      </div>
    </div>

    <div class="checkbox-group">
      <input type="checkbox" id="activo" [(ngModel)]="servicioForm.activo">
      <label for="activo">Servicio disponible para cotizaci√≥n</label>
    </div>

    <div class="form-actions">
      <button (click)="guardarServicio()" class="btn btn-success">
        {{ servicioForm.id ? 'üìù Actualizar' : 'üíæ Guardar Servicio' }}
      </button>

      <button (click)="limpiarFormulario()" class="btn btn-secondary">
        ‚ùå Cancelar
      </button>
    </div>
  </div>

  <!-- Lista de servicios -->
  <div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
      <h3 style="margin: 0;">üìã Servicios Disponibles
        <span class="contador">{{ servicios.length }}</span>
      </h3>
    </div>

    <div *ngIf="servicios.length === 0" class="loading">
      No hay servicios registrados. ¬°Agrega el primero!
    </div>

    <div *ngIf="servicios.length > 0" class="table-container">
      <table class="table">
        <thead>
          <tr>
            <th style="width: 80px;">ID</th>
            <th>Servicio</th>
            <th style="width: 150px;">Precio</th>
            <th style="width: 120px;">Estado</th>
            <th style="width: 200px;">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let servicio of servicios">
            <td>
              <strong>#{{ servicio.id }}</strong>
            </td>
            <td>
              <div class="servicio-info">
                <span class="servicio-nombre">
                  <span class="icono-servicio">üß™</span>
                  {{ servicio.nombre }}
                </span>
                <span class="servicio-descripcion">
                  {{ servicio.descripcion || 'Sin descripci√≥n detallada' }}
                </span>
              </div>
            </td>
            <td>
              <span class="servicio-precio">${{ formatPrice(servicio.precio) }}</span>
            </td>
            <td>
              <span [class]="servicio.activo ? 'estado-badge estado-activo' : 'estado-badge estado-inactivo'">
                {{ servicio.activo ? 'Activo' : 'Inactivo' }}
              </span>
            </td>
            <td>
              <div class="acciones">
                <button (click)="editarServicio(servicio)" class="btn btn-warning btn-icon">
                  Editar
                </button>
                <!-- Cambiar: usar cambiarEstadoServicio en lugar de eliminarServicio -->
                <button (click)="cambiarEstadoServicio(servicio)"
                  [class]="servicio.activo ? 'btn btn-danger btn-icon' : 'btn btn-success btn-icon'">
                  {{ servicio.activo ? 'Desactivar' : 'Activar' }}
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>